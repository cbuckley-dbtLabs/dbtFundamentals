semantic_models:
- name: fct_orders
  description: Orders fact table at the order level. This table contains one row per
    order and includes the order date and customer information.
  model: ref('fct_orders')
  defaults:
    agg_time_dimension: date
  entities:
  - name: order
    type: primary
    expr: ORDER_ID
  - name: customer
    type: foreign
    expr: CUSTOMER_ID
  dimensions:
  - name: date
    expr: order_date
    type: time
    type_params:
      time_granularity: day
  - name: gift_card_amount
    type: categorical
  measures:
  - name: amount
    description: The total amount of the order.
    agg: sum
    create_metric: true
  - name: count_order
    agg: count
    create_metric: true
    expr: ORDER_ID
  - name: count_customer
    agg: count_distinct
    create_metric: true
    expr: CUSTOMER_ID
 
  metrics:
    - name: lifetime_spend_pretax
      type: simple
      description: Customer's lifetime spend before tax
      label: LTV Pre-tax
      agg: sum